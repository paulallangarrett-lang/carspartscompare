<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Car Parts Compare UK | Compare Prices Across Top UK Retailers</title>
    <meta name="description" content="Find the cheapest car parts in the UK. Compare prices from Euro Car Parts, GSF, CarParts4Less and more. Enter your reg, find your part, save money.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #f5f5f5;
            --bg-white: #ffffff;
            --bg-dark: #1a1a2e;
            --accent: #0066cc;
            --accent-hover: #0052a3;
            --success: #00a651;
            --success-hover: #008c44;
            --warning: #ff6b00;
            --text-dark: #1a1a1a;
            --text-medium: #4a4a4a;
            --text-light: #717171;
            --border: #e0e0e0;
            --shadow: 0 2px 8px rgba(0,0,0,0.08);
            --shadow-lg: 0 4px 20px rgba(0,0,0,0.12);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, sans-serif;
            background: var(--bg-primary);
            color: var(--text-dark);
            line-height: 1.6;
        }

        /* Header */
        header {
            background: var(--bg-dark);
            color: white;
        }

        .top-bar {
            background: #0f0f1a;
            padding: 0.5rem 0;
            font-size: 0.85rem;
        }

        .top-bar-inner {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .top-bar a {
            color: #a0a0a0;
            text-decoration: none;
        }

        .top-bar a:hover {
            color: white;
        }

        .main-nav {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
            color: white;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: var(--accent);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo-text {
            font-size: 1.4rem;
            font-weight: 700;
        }

        .logo-text span {
            color: var(--accent);
        }

        /* Trust Bar */
        .trust-bar {
            background: var(--bg-white);
            border-bottom: 1px solid var(--border);
            padding: 0.75rem 0;
        }

        .trust-bar-inner {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .trust-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            color: var(--text-medium);
        }

        .trust-item svg {
            width: 24px;
            height: 24px;
            color: var(--success);
        }

        .trust-item strong {
            color: var(--text-dark);
        }

        /* Hero / Search Section */
        .hero {
            background: linear-gradient(135deg, var(--bg-dark) 0%, #2a2a4a 100%);
            padding: 3rem 1rem;
            text-align: center;
            color: white;
        }

        .hero h1 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .hero p {
            color: #b0b0b0;
            margin-bottom: 2rem;
            font-size: 1.1rem;
        }

        /* UK Reg Plate Style Search */
        .search-container {
            max-width: 500px;
            margin: 0 auto;
        }

        .reg-search {
            display: flex;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
        }

        .reg-input-wrapper {
            flex: 1;
            display: flex;
            align-items: center;
            background: #ffd200;
            padding: 0 1rem;
        }

        .reg-badge {
            background: #003399;
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 700;
            margin-right: 0.75rem;
        }

        .reg-input {
            flex: 1;
            border: none;
            background: transparent;
            font-size: 1.5rem;
            font-weight: 700;
            text-transform: uppercase;
            padding: 1rem 0;
            letter-spacing: 2px;
            outline: none;
            font-family: 'Inter', sans-serif;
        }

        .reg-input::placeholder {
            color: #666;
            font-weight: 500;
            letter-spacing: 0;
        }

        .search-btn {
            background: var(--success);
            color: white;
            border: none;
            padding: 1rem 2rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .search-btn:hover {
            background: var(--success-hover);
        }

        .search-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .search-hint {
            margin-top: 1rem;
            font-size: 0.9rem;
            color: #a0a0a0;
        }

        /* Main Content */
        .main-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .section-header h2 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-dark);
        }

        /* Categories Grid */
        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 1rem;
            margin-bottom: 3rem;
        }

        .category-card {
            background: var(--bg-white);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .category-card:hover {
            border-color: var(--accent);
            box-shadow: var(--shadow);
            transform: translateY(-2px);
        }

        .category-icon {
            width: 100px;
            height: 100px;
            margin: 0 auto 0.75rem;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-primary);
            border-radius: 12px;
            overflow: hidden;
        }

        .category-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .category-name {
            font-weight: 600;
            font-size: 1rem;
        }

        /* Vehicle Result */
        .vehicle-result {
            background: var(--bg-white);
            border-radius: 12px;
            padding: 2rem;
            max-width: 500px;
            margin: 0 auto;
            box-shadow: var(--shadow-lg);
        }

        .vehicle-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border);
        }

        .vehicle-header h3 {
            color: var(--success);
            font-size: 1.25rem;
        }

        .vehicle-vrm {
            background: #ffd200;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            font-weight: 700;
            font-size: 1.1rem;
            letter-spacing: 1px;
        }

        .vehicle-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .vehicle-detail {
            background: var(--bg-primary);
            padding: 1rem;
            border-radius: 8px;
        }

        .vehicle-detail span {
            display: block;
            font-size: 0.8rem;
            color: var(--text-light);
            margin-bottom: 0.25rem;
        }

        .vehicle-detail strong {
            font-size: 1.1rem;
            color: var(--text-dark);
        }

        .vehicle-confirm {
            text-align: center;
            color: var(--text-medium);
            margin-bottom: 1rem;
        }

        .vehicle-actions {
            display: flex;
            gap: 1rem;
        }

        .btn-confirm {
            flex: 1;
            background: var(--success);
            color: white;
            border: none;
            padding: 1rem;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
        }

        .btn-confirm:hover {
            background: var(--success-hover);
        }

        .btn-retry {
            flex: 1;
            background: var(--bg-primary);
            color: var(--text-medium);
            border: 1px solid var(--border);
            padding: 1rem;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
        }

        .btn-retry:hover {
            border-color: var(--text-light);
        }

        /* Parts Categories */
        .parts-categories {
            max-width: 700px;
            margin: 0 auto;
        }

        .parts-categories h3 {
            text-align: center;
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            color: white;
        }

        .parts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .part-category-btn {
            background: var(--bg-white);
            border: 2px solid transparent;
            border-radius: 12px;
            padding: 1.25rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .part-category-btn:hover {
            border-color: var(--accent);
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .part-category-btn .icon {
            width: 60px;
            height: 60px;
            margin: 0 auto 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            overflow: hidden;
            background: var(--bg-primary);
        }

        .part-category-btn .icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .part-category-btn .name {
            font-weight: 600;
            color: var(--text-dark);
        }

        .btn-back {
            background: transparent;
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            display: block;
            margin: 0 auto;
        }

        .btn-back:hover {
            background: rgba(255,255,255,0.1);
        }

        /* Comparison Results */
        .comparison-results {
            max-width: 800px;
            margin: 0 auto;
        }

        .results-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border);
        }

        .results-header .btn-back {
            background: var(--bg-primary);
            border: 1px solid var(--border);
            color: var(--text-medium);
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
        }

        .results-header h3 {
            flex: 1;
            font-size: 1.5rem;
            color: var(--text-dark);
        }

        .results-count {
            color: var(--text-light);
            font-size: 0.9rem;
        }

        .part-card {
            background: var(--bg-white);
            border: 1px solid var(--border);
            border-radius: 12px;
            margin-bottom: 1rem;
            overflow: hidden;
        }

        .part-info {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1.25rem;
            background: var(--bg-primary);
            border-bottom: 1px solid var(--border);
        }

        .part-icon {
            width: 70px;
            height: 70px;
            background: var(--bg-white);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            flex-shrink: 0;
        }

        .part-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .part-details h4 {
            font-size: 1.1rem;
            margin-bottom: 0.25rem;
        }

        .part-meta {
            font-size: 0.85rem;
            color: var(--text-light);
        }

        .part-savings {
            display: inline-block;
            background: #e8f5e9;
            color: var(--success);
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-top: 0.25rem;
        }

        .price-comparison {
            padding: 0.5rem;
        }

        .price-row {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            margin-bottom: 0.25rem;
        }

        .price-row.cheapest {
            background: #e8f5e9;
        }

        .retailer-name {
            flex: 1;
            font-weight: 500;
        }

        .retailer-price {
            font-size: 1.25rem;
            font-weight: 700;
            margin-right: 1rem;
        }

        .btn-deal {
            background: var(--bg-primary);
            color: var(--text-medium);
            border: 1px solid var(--border);
            padding: 0.5rem 1rem;
            border-radius: 6px;
            text-decoration: none;
            font-weight: 500;
            font-size: 0.9rem;
        }

        .btn-deal:hover {
            border-color: var(--accent);
            color: var(--accent);
        }

        .btn-deal-best {
            background: var(--success);
            color: white;
            border: none;
        }

        .btn-deal-best:hover {
            background: var(--success-hover);
            color: white;
        }

        .results-disclaimer {
            text-align: center;
            font-size: 0.8rem;
            color: var(--text-light);
            margin-top: 1.5rem;
        }

        /* Loading */
        .loading-state {
            text-align: center;
            padding: 3rem;
        }

        .loading-state p {
            color: var(--text-light);
            margin-top: 1rem;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .spinner {
            animation: spin 1s linear infinite;
        }

        /* Why Compare */
        .why-compare {
            background: var(--bg-white);
            padding: 3rem 1rem;
            margin-top: 2rem;
        }

        .why-compare-inner {
            max-width: 1200px;
            margin: 0 auto;
        }

        .why-compare h2 {
            text-align: center;
            font-size: 1.75rem;
            margin-bottom: 2rem;
        }

        .benefits-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }

        .benefit-card {
            text-align: center;
            padding: 1.5rem;
        }

        .benefit-icon {
            width: 60px;
            height: 60px;
            background: var(--bg-primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            font-size: 1.5rem;
        }

        .benefit-card h3 {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
        }

        .benefit-card p {
            color: var(--text-light);
            font-size: 0.95rem;
        }

        /* Retailers */
        .retailers-section {
            padding: 2rem 1rem;
            text-align: center;
        }

        .retailers-section h3 {
            font-size: 1rem;
            color: var(--text-light);
            margin-bottom: 1.5rem;
            font-weight: 500;
        }

        .retailer-logos {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 3rem;
            flex-wrap: wrap;
            opacity: 0.6;
        }

        .retailer-logo {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-medium);
        }

        /* Footer */
        footer {
            background: var(--bg-dark);
            color: white;
            padding: 3rem 1rem 1.5rem;
        }

        .footer-inner {
            max-width: 1200px;
            margin: 0 auto;
        }

        .footer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-col h4 {
            font-size: 1rem;
            margin-bottom: 1rem;
        }

        .footer-col ul {
            list-style: none;
        }

        .footer-col li {
            margin-bottom: 0.5rem;
        }

        .footer-col a {
            color: #a0a0a0;
            text-decoration: none;
            font-size: 0.9rem;
        }

        .footer-col a:hover {
            color: white;
        }

        .footer-bottom {
            border-top: 1px solid #333;
            padding-top: 1.5rem;
            text-align: center;
            font-size: 0.85rem;
            color: #666;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero h1 { font-size: 1.5rem; }
            .reg-search { flex-direction: column; }
            .search-btn { width: 100%; justify-content: center; }
            .trust-bar-inner { justify-content: center; }
            .trust-item { font-size: 0.8rem; }
            .vehicle-details { grid-template-columns: 1fr; }
            .vehicle-actions { flex-direction: column; }
            .price-row { flex-wrap: wrap; gap: 0.5rem; }
            .retailer-price { margin-right: 0; }
            .btn-deal { width: 100%; text-align: center; }
        }
    </style>
</head>
<body>
    <header>
        <div class="top-bar">
            <div class="top-bar-inner">
                <span>üá¨üáß UK's Car Parts Price Comparison</span>
                <a href="/admin.html">Admin</a>
            </div>
        </div>
        <nav class="main-nav">
            <a href="/" class="logo">
                <div class="logo-icon">
                    <svg width="24" height="24" fill="none" stroke="white" stroke-width="2" viewBox="0 0 24 24">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M8 12l2 2 4-4"/>
                    </svg>
                </div>
                <span class="logo-text">Car<span>Parts</span>Compare</span>
            </a>
        </nav>
    </header>

    <div class="trust-bar">
        <div class="trust-bar-inner">
            <div class="trust-item">
                <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                <span><strong>Save Money</strong> Compare 4+ retailers</span>
            </div>
            <div class="trust-item">
                <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                <span><strong>100% Free</strong> No fees or sign-up</span>
            </div>
            <div class="trust-item">
                <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
                <span><strong>Instant Results</strong> Find parts in seconds</span>
            </div>
            <div class="trust-item">
                <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/></svg>
                <span><strong>Trusted Retailers</strong> UK's biggest names</span>
            </div>
        </div>
    </div>

    <section class="hero">
        <h1>Compare Car Parts Prices Instantly</h1>
        <p>Enter your reg to find the best prices from UK retailers</p>
        
        <div class="search-container" id="search-box">
            <div class="reg-search">
                <div class="reg-input-wrapper">
                    <span class="reg-badge">GB</span>
                    <input type="text" id="vrm-input" class="reg-input" placeholder="Enter reg" maxlength="8" autocomplete="off">
                </div>
                <button id="search-btn" class="search-btn">
                    <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
                    Find Parts
                </button>
            </div>
            <p class="search-hint">Example: AB12 CDE</p>
        </div>
    </section>

    <main class="main-content">
        <div class="section-header">
            <h2>Popular Categories</h2>
        </div>
        <div class="categories-grid">
            <div class="category-card">
                <div class="category-icon">
                    <img src="https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=120&h=120&fit=crop" alt="Brake Disc" loading="lazy">
                </div>
                <div class="category-name">Brakes</div>
            </div>
            <div class="category-card">
                <div class="category-icon">
                    <img src="https://images.unsplash.com/photo-1487754180451-c456f719a1fc?w=120&h=120&fit=crop" alt="Oil Filter" loading="lazy">
                </div>
                <div class="category-name">Filters</div>
            </div>
            <div class="category-card">
                <div class="category-icon">
                    <img src="https://images.unsplash.com/photo-1600712242805-5f78671b24da?w=120&h=120&fit=crop" alt="Suspension" loading="lazy">
                </div>
                <div class="category-name">Suspension</div>
            </div>
            <div class="category-card">
                <div class="category-icon">
                    <img src="https://images.unsplash.com/photo-1486262715619-67b85e0b08d3?w=120&h=120&fit=crop" alt="Engine Parts" loading="lazy">
                </div>
                <div class="category-name">Engine Parts</div>
            </div>
            <div class="category-card">
                <div class="category-icon">
                    <img src="https://images.unsplash.com/photo-1616788494707-ec28f08d05a1?w=120&h=120&fit=crop" alt="Bulbs" loading="lazy">
                </div>
                <div class="category-name">Bulbs</div>
            </div>
            <div class="category-card">
                <div class="category-icon">
                    <img src="https://images.unsplash.com/photo-1619642751034-765dfdf7c58e?w=120&h=120&fit=crop" alt="Battery" loading="lazy">
                </div>
                <div class="category-name">Battery</div>
            </div>
            <div class="category-card">
                <div class="category-icon">
                    <img src="https://images.unsplash.com/photo-1635784063944-e94899516c88?w=120&h=120&fit=crop" alt="Engine Oil" loading="lazy">
                </div>
                <div class="category-name">Engine Oil</div>
            </div>
            <div class="category-card">
                <div class="category-icon">
                    <img src="https://images.unsplash.com/photo-1489824904134-891ab64532f1?w=120&h=120&fit=crop" alt="Wipers" loading="lazy">
                </div>
                <div class="category-name">Wipers</div>
            </div>
        </div>
    </main>

    <section class="why-compare">
        <div class="why-compare-inner">
            <h2>Why Compare With Us?</h2>
            <div class="benefits-grid">
                <div class="benefit-card">
                    <div class="benefit-icon">üí∞</div>
                    <h3>Save Up To 40%</h3>
                    <p>Prices vary massively between retailers. We find you the cheapest option every time.</p>
                </div>
                <div class="benefit-card">
                    <div class="benefit-icon">üöó</div>
                    <h3>Vehicle-Specific</h3>
                    <p>Enter your reg and we'll show parts compatible with your exact vehicle.</p>
                </div>
                <div class="benefit-card">
                    <div class="benefit-icon">‚ö°</div>
                    <h3>Lightning Fast</h3>
                    <p>Compare prices across multiple retailers in seconds, not hours.</p>
                </div>
                <div class="benefit-card">
                    <div class="benefit-icon">üõ°Ô∏è</div>
                    <h3>Trusted Brands</h3>
                    <p>We only compare prices from the UK's most trusted retailers.</p>
                </div>
            </div>
        </div>
    </section>

    <section class="retailers-section">
        <h3>Comparing prices from</h3>
        <div class="retailer-logos">
            <span class="retailer-logo">Euro Car Parts</span>
            <span class="retailer-logo">GSF Car Parts</span>
            <span class="retailer-logo">CarParts4Less</span>
            <span class="retailer-logo">Autodoc</span>
        </div>
    </section>

    <footer>
        <div class="footer-inner">
            <div class="footer-grid">
                <div class="footer-col">
                    <h4>CarPartsCompare</h4>
                    <ul>
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">How It Works</a></li>
                        <li><a href="#">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Popular Searches</h4>
                    <ul>
                        <li><a href="#">Brake Pads</a></li>
                        <li><a href="#">Oil Filters</a></li>
                        <li><a href="#">Car Batteries</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Legal</h4>
                    <ul>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Terms of Use</a></li>
                        <li><a href="#">Cookie Policy</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>¬© 2025 CarPartsCompare.co.uk - Compare car parts prices from the UK's top retailers</p>
                <p style="margin-top: 0.5rem;">We may earn commission from purchases made through our links.</p>
            </div>
        </div>
    </footer>

    <script>
        // Category images - real product photos
        const categoryImages = {
            'brakes': 'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=80&h=80&fit=crop',
            'filters': 'https://images.unsplash.com/photo-1487754180451-c456f719a1fc?w=80&h=80&fit=crop',
            'suspension': 'https://images.unsplash.com/photo-1600712242805-5f78671b24da?w=80&h=80&fit=crop',
            'engine': 'https://images.unsplash.com/photo-1486262715619-67b85e0b08d3?w=80&h=80&fit=crop',
            'lights': 'https://images.unsplash.com/photo-1616788494707-ec28f08d05a1?w=80&h=80&fit=crop',
            'battery': 'https://images.unsplash.com/photo-1619642751034-765dfdf7c58e?w=80&h=80&fit=crop',
            'oil': 'https://images.unsplash.com/photo-1635784063944-e94899516c88?w=80&h=80&fit=crop',
            'wipers': 'https://images.unsplash.com/photo-1489824904134-891ab64532f1?w=80&h=80&fit=crop',
            'exhaust': 'https://images.unsplash.com/photo-1558618047-3c8c76ca7d13?w=80&h=80&fit=crop',
            'cooling': 'https://images.unsplash.com/photo-1517524008697-84bbe3c3fd98?w=80&h=80&fit=crop',
            'clutch': 'https://images.unsplash.com/photo-1492144534655-ae79c964c9d7?w=80&h=80&fit=crop',
            'steering': 'https://images.unsplash.com/photo-1449965408869-eaa3f722e40d?w=80&h=80&fit=crop',
            'default': 'https://images.unsplash.com/photo-1486262715619-67b85e0b08d3?w=80&h=80&fit=crop'
        };

        function getCategoryImage(slug) {
            return categoryImages[slug] || categoryImages['default'];
        }

        let currentVehicle = null;

        const vrmInput = document.getElementById('vrm-input');
        vrmInput.addEventListener('input', (e) => {
            e.target.value = e.target.value.toUpperCase().replace(/[^A-Z0-9 ]/g, '');
        });

        document.getElementById('search-btn').addEventListener('click', async () => {
            const vrm = vrmInput.value.trim();
            if (!vrm) { alert('Please enter a registration number'); return; }

            const btn = document.getElementById('search-btn');
            btn.disabled = true;
            btn.innerHTML = '<svg class="spinner" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10" opacity="0.3"/><path d="M12 2a10 10 0 0 1 10 10"/></svg> Searching...';

            try {
                const response = await fetch(`/api/vehicle?vrm=${encodeURIComponent(vrm)}`);
                const vehicle = await response.json();
                if (vehicle.error) { alert('Vehicle not found.'); }
                else { currentVehicle = vehicle; showVehicleResult(vehicle); }
            } catch (error) { alert('Something went wrong.'); }
            finally {
                btn.disabled = false;
                btn.innerHTML = '<svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg> Find Parts';
            }
        });

        vrmInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') document.getElementById('search-btn').click(); });

        function showVehicleResult(vehicle) {
            document.getElementById('search-box').innerHTML = `
                <div class="vehicle-result">
                    <div class="vehicle-header">
                        <h3>‚úì Vehicle Found</h3>
                        <span class="vehicle-vrm">${vehicle.vrm}</span>
                    </div>
                    <div class="vehicle-details">
                        <div class="vehicle-detail"><span>Make</span><strong>${vehicle.make}</strong></div>
                        <div class="vehicle-detail"><span>Model</span><strong>${vehicle.model}</strong></div>
                        <div class="vehicle-detail"><span>Year</span><strong>${vehicle.year}</strong></div>
                        <div class="vehicle-detail"><span>Engine</span><strong>${vehicle.engineSize}L ${vehicle.fuelType}</strong></div>
                    </div>
                    <p class="vehicle-confirm">Is this your vehicle?</p>
                    <div class="vehicle-actions">
                        <button class="btn-confirm" onclick="showPartsCategories()">Yes, find parts</button>
                        <button class="btn-retry" onclick="resetSearch()">No, try again</button>
                    </div>
                </div>
            `;
        }

        async function showPartsCategories() {
            try {
                const response = await fetch('/api/categories');
                const categories = await response.json();
                document.getElementById('search-box').innerHTML = `
                    <div class="parts-categories">
                        <h3>What part do you need?</h3>
                        <div class="parts-grid">
                            ${categories.map(cat => `
                                <button class="part-category-btn" onclick="searchParts('${cat.slug}', '${cat.name}')">
                                    <div class="icon"><img src="${getCategoryImage(cat.slug)}" alt="${cat.name}" loading="lazy"></div>
                                    <div class="name">${cat.name}</div>
                                </button>
                            `).join('')}
                        </div>
                        <button class="btn-back" onclick="resetSearch()">‚Üê Start over</button>
                    </div>
                `;
            } catch (error) { alert('Failed to load categories.'); }
        }

        async function searchParts(categorySlug, categoryName) {
            const searchBox = document.getElementById('search-box');
            searchBox.innerHTML = '<div class="loading-state"><svg class="spinner" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#0066cc" stroke-width="2"><circle cx="12" cy="12" r="10" opacity="0.3"/><path d="M12 2a10 10 0 0 1 10 10"/></svg><p>Finding the best prices...</p></div>';
            document.querySelector('.main-content').style.display = 'none';
            document.querySelector('.why-compare').style.display = 'none';
            document.querySelector('.retailers-section').style.display = 'none';

            try {
                const params = new URLSearchParams({ category: categorySlug, make: currentVehicle.make, model: currentVehicle.model, year: currentVehicle.year });
                const response = await fetch(`/api/products?${params}`);
                const parts = await response.json();
                if (parts.length === 0) {
                    searchBox.innerHTML = `<div class="comparison-results"><div class="results-header"><button class="btn-back" onclick="showPartsCategories()">‚Üê Back</button><h3>${categoryName}</h3></div><div style="text-align:center;padding:3rem;background:white;border-radius:12px;"><p>No parts found for your ${currentVehicle.make} ${currentVehicle.model}.</p><button class="btn-confirm" style="margin-top:1rem;" onclick="showPartsCategories()">Try another category</button></div></div>`;
                    return;
                }
                showComparisonResults(categorySlug, categoryName, parts);
            } catch (error) { searchBox.innerHTML = '<div style="text-align:center;padding:3rem;"><p>Something went wrong.</p><button class="btn-confirm" onclick="showPartsCategories()">Try Again</button></div>'; }
        }

        function showComparisonResults(categorySlug, categoryName, parts) {
            const categoryImage = getCategoryImage(categorySlug);
            document.getElementById('search-box').innerHTML = `
                <div class="comparison-results">
                    <div class="results-header">
                        <button class="btn-back" onclick="showPartsCategories()">‚Üê Back</button>
                        <h3>${categoryName}</h3>
                        <span class="results-count">${parts.length} parts found</span>
                    </div>
                    ${parts.map(part => {
                        const cheapest = part.prices[0].price;
                        const mostExpensive = part.prices[part.prices.length - 1].price;
                        const savings = (mostExpensive - cheapest).toFixed(2);
                        return `
                            <div class="part-card">
                                <div class="part-info">
                                    <div class="part-icon"><img src="${categoryImage}" alt="${part.name}" loading="lazy"></div>
                                    <div class="part-details">
                                        <h4>${part.name}</h4>
                                        <span class="part-meta">${part.brand || ''} ${part.part_number ? '‚Ä¢ ' + part.part_number : ''}</span>
                                        ${savings > 0 ? `<span class="part-savings">Save up to ¬£${savings}</span>` : ''}
                                    </div>
                                </div>
                                <div class="price-comparison">
                                    ${part.prices.map((p, i) => `
                                        <div class="price-row ${i === 0 ? 'cheapest' : ''}">
                                            <span class="retailer-name">${p.retailer}</span>
                                            <span class="retailer-price">¬£${p.price.toFixed(2)}</span>
                                            <a href="${p.url || '#'}" class="btn-deal ${i === 0 ? 'btn-deal-best' : ''}" target="_blank" rel="noopener sponsored" onclick="trackClick(${p.product_id || 0}, '${p.retailer_slug || ''}', '${categorySlug}')">${i === 0 ? 'Best Price' : 'View Deal'}</a>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        `;
                    }).join('')}
                    <p class="results-disclaimer">Prices shown are indicative. Always verify on retailer's website. We may earn commission from purchases.</p>
                </div>
            `;
        }

        function trackClick(productId, retailerSlug, categorySlug) {
            fetch('/api/track-click', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ product_id: productId, retailer_slug: retailerSlug, vrm: currentVehicle?.vrm, category_slug: categorySlug }) }).catch(() => {});
        }

        function resetSearch() {
            currentVehicle = null;
            document.querySelector('.main-content').style.display = 'block';
            document.querySelector('.why-compare').style.display = 'block';
            document.querySelector('.retailers-section').style.display = 'block';
            location.reload();
        }
    </script>
</body>
</html>
